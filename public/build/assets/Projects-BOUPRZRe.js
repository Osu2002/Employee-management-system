import{A as m}from"./AppLayout-C2fcH5kv.js";import{S as d}from"./sweetalert2.all-R2NmH7ql.js";import{a as v,J as f,o,e as g,w as y,f as s,i as n,s as u,F as j,E as S,C as i,G as _,q as k,O as A,P as x}from"./index-QC1Cz5ZB.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SideNavBar-Do_6nNue.js";const P={components:{AppLayout:m},props:{projects:{type:Array,default:()=>[]}},data(){return{projects:[...this.projects],isLoading:!1}},methods:{parseJSON(t){try{return JSON.parse(t||"[]")}catch(a){return console.error("Error parsing JSON:",a),[]}},async approveProject(t){var a;this.isLoading=!0;try{await v.patch(`/admin/projects/${t}/approve`),this.projects=this.projects.filter(c=>c.id!==t),d.fire({title:"Project Approved!",text:"The project has been successfully approved.",icon:"success",confirmButtonText:"OK",confirmButtonColor:"#28a745"})}catch(c){console.error("Error approving project:",((a=c.response)==null?void 0:a.data)||c.message),d.fire({title:"Approval Error",text:"An error occurred while approving the project. Please try again.",icon:"error",confirmButtonText:"OK",confirmButtonColor:"#dc3545"})}finally{this.isLoading=!1}}}},r=t=>(A("data-v-4e4107cc"),t=t(),x(),t),b={class:"container"},L={key:0,class:"processing-overlay"},N=r(()=>s("div",{class:"spinner"},null,-1)),B=r(()=>s("p",null,"Processing your request...",-1)),O=[N,B],w=r(()=>s("h1",null,"Employee Projects Management",-1)),E={key:1},J={class:"project-header"},T=["onClick","disabled"],I={class:"description"},V=r(()=>s("strong",null,"Skills:",-1)),q=r(()=>s("strong",null,"Contributors:",-1)),F=r(()=>s("strong",null,"Status:",-1)),K={key:2},z=r(()=>s("p",{class:"no-projects"},"No projects available for management.",-1)),D=[z];function G(t,a,c,M,p,l){const h=f("AppLayout");return o(),g(h,null,{default:y(()=>[s("div",b,[p.isLoading?(o(),n("div",L,O)):u("",!0),w,p.projects.length>0?(o(),n("div",E,[(o(!0),n(j,null,S(p.projects,e=>(o(),n("div",{key:e.id,class:"project-card"},[s("div",J,[s("h3",null,i(e.project_name),1),s("div",null,[e.status===0?(o(),n("button",{key:0,onClick:H=>l.approveProject(e.id),class:"btn btn-success",disabled:p.isLoading}," Approve ",8,T)):u("",!0)])]),s("p",I,i(e.project_description),1),s("p",null,[V,_(" "+i(l.parseJSON(e.skills).join(", ")),1)]),s("p",null,[q,_(" "+i(l.parseJSON(e.contributors).join(", ")),1)]),s("p",null,[F,s("span",{class:k({statusPending:e.status===0,statusApproved:e.status===1})},i(e.status===0?"Pending":"Approved"),3)])]))),128))])):(o(),n("div",K,D))])]),_:1})}const Y=C(P,[["render",G],["__scopeId","data-v-4e4107cc"]]);export{Y as default};
