import{o as i,i as d,f as e,G as y,C as n,s as u,j as m,N as b,F as g,E as S,q as L,L as I,D as w,J as h,e as q,w as v,g as _,x as F,K as c}from"./index-QC1Cz5ZB.js";import{A as R}from"./AppLayout-C2fcH5kv.js";import{F as U}from"./FileInputComponent-LsIVWHfz.js";import{S as A}from"./SideNavBar-Do_6nNue.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as M}from"./InputComponent-_8nvJoKz.js";const E={props:{id:{type:String,required:!0},className:{type:String,default:"mb-4 col-md-6"},label:{type:String,required:!0},error:{type:String,default:""},isRequired:{type:Boolean,default:!0},isMultiple:{type:Boolean,default:!1},isService:{type:Boolean,default:!1},options:{type:Array,default:()=>[]},modelValue:{default:""},showSearch:{type:Boolean,default:!0}},data(){return{model:this.modelValue}},emits:["update:modelValue","onChange"],mounted(){this.initSelect2()},methods:{initSelect2(){const l=this;$(this.$el).find(".select2").select2({placeholder:this.placeholder,minimumResultsForSearch:this.showSearch?1:1/0,dropdownParent:$(this.$el).parent()}).on("change",function(){const o=$(this).val();l.model!==o&&(l.model=o,l.$emit("update:modelValue",o),l.$emit("onChange",o))})}},watch:{modelValue(l){this.model!==l&&(this.model=l,$(this.$el).find(".select2").val(l).trigger("change"))}}},B=["for"],D={key:0},N=["id","multiple","required"],j=["value"],T={class:"text-danger"},P=["for"],K={key:0},O=["id","multiple","required"],H=["value"],z={class:"text-danger"};function G(l,o,s,x,t,f){return s.isService?(i(),d("div",{key:0,class:L(s.className)},[e("label",{for:s.id,class:"form-label"},[y(n(s.label)+" ",1),s.isRequired?(i(),d("sup",D,"*")):u("",!0)],8,B),m(e("select",{class:"select2 form-control form-select",id:s.id,multiple:s.isMultiple,"onUpdate:modelValue":o[0]||(o[0]=r=>t.model=r),placeholder:"--Select--",required:s.isRequired},[(i(!0),d(g,null,S(s.options,r=>(i(),d("option",{value:r.id,key:r.id},n(r.name+" ("+r.categories[0].name+") - Rs. "+r.price+".00"),9,j))),128))],8,N),[[b,t.model]]),e("div",T,n(s.error),1)],2)):(i(),d("div",{key:1,class:L(s.className)},[e("label",{for:s.id,class:"form-label"},[y(n(s.label)+" ",1),s.isRequired?(i(),d("sup",K,"*")):u("",!0)],8,P),m(e("select",{class:"select2 form-control form-select",id:s.id,multiple:s.isMultiple,"onUpdate:modelValue":o[1]||(o[1]=r=>t.model=r),placeholder:"--Select--",required:s.isRequired},[(i(!0),d(g,null,S(s.options,r=>(i(),d("option",{value:r.id,key:r.id},n(r.name),9,H))),128))],8,O),[[b,t.model]]),e("div",z,n(s.error),1)],2))}const J=V(E,[["render",G]]),W={components:{Link:I,AppLayout:R,FileInputComponent:U,SelectInputComponent:A,SelectInputComponent2:J,InputComponent:M},props:{errors:Object,employee:Object,leave_data:Object},data(){return{form:w({employee_id:this.employee.id,leaeve_id:"",from_date:"",to:"",reason:"",type:"",leave_type:"",leave_status:"",proof_image:"",start_time:"",end_time:""}),durationKey:0}},mounted(){if(this.leave_data&&(this.form.leaeve_id=this.leave_data.id,this.form.from_date=this.leave_data.from_date,this.form.to=this.leave_data.to,this.form.reason=this.leave_data.reason,this.form.type=this.leave_data.type,this.form.leave_type=this.leave_data.leave_type,this.form.leave_status=this.leave_data.leave_status,this.leave_data.leave_type==="Short Leave"&&this.leave_data.type)){const l=this.leave_data.type.split(" - ");l.length===2&&(this.form.start_time=l[0],this.form.end_time=l[1])}},watch:{"form.leave_type"(l){l==="Short Leave"?this.form.type=`${this.form.start_time} - ${this.form.end_time}`:(this.form.start_time="",this.form.end_time="",this.durationKey+=1)},"form.start_time"(l){this.form.leave_type==="Short Leave"&&(this.form.type=`${l} - ${this.form.end_time}`)},"form.end_time"(l){this.form.leave_type==="Short Leave"&&(this.form.type=`${this.form.start_time} - ${l}`)}},computed:{profileImage(){return this.leave_data&&this.leave_data.media.length>0?this.leave_data.media[0].original_url:""}},methods:{submit(){this.form.post(this.leave_data?route("employee.leaves.update"):route("employee.leaves_store"),{onSuccess:()=>{this.form.reset(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.form.reset(),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")}})}}},Q={class:"row"},X={class:"col-md-12"},Y={class:"card mb-4"},Z={class:"card-header pb-0"},ee={class:"col-12 mb-4"},te={class:"row"},oe={class:"col-1"},se=e("i",{class:"back-icon fas fa-arrow-left p-2"},null,-1),le={class:"col-11 d-flex justify-content-end"},ae={class:"m-0 text-center"},re=e("h5",null,"Employee Leaves",-1),ie=e("p",null,"Manage Employee Leaves Details",-1),ne={class:"card-body"},de={class:"row"},me={class:"mb-3 col-md-6",action:"/action_page.php"},_e=e("label",{class:"form-label",for:"from_date"},"From Date:",-1),ce={class:"text-danger"},ue={class:"mb-3 col-md-6",action:"/action_page.php"},fe=e("label",{class:"form-label",for:"to"},"To:",-1),he={class:"text-danger"},pe={key:0,class:"mb-3 col-md-6"},ve=e("label",{class:"form-label",for:"start_time"},"Start Time",-1),ye={key:1,class:"mb-3 col-md-6"},be=e("label",{class:"form-label",for:"end_time"},"End Time",-1),ge={class:"mb-3 col-md-6"},Se=e("label",{for:"reason",class:"form-label"},"Reason",-1),Le={class:"text-danger"},Ve={class:"mb-3 col-md-2"},xe=e("label",{for:"proof_image",class:"form-label me-3"},"Proof Image:",-1),Ce=e("br",null,null,-1),ke={class:"text-danger"},Ie=["href"],we={class:"mt-2"},qe=["disabled"],Fe=y("Cancel");function Re(l,o,s,x,t,f){const r=h("Link"),p=h("SelectInputComponent"),C=h("FileInputComponent"),k=h("AppLayout");return i(),q(k,null,{default:v(()=>[e("div",Q,[e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[e("div",oe,[_(r,{class:"back-button",href:l.route("employee.leaves.index",t.form.employee_id)},{default:v(()=>[se]),_:1},8,["href"])]),e("div",le,[e("h5",ae,n(s.employee.name),1)])])]),re,ie]),e("div",ne,[e("form",{id:"formAccountSettings",onSubmit:o[9]||(o[9]=F((...a)=>f.submit&&f.submit(...a),["prevent"]))},[e("div",de,[e("div",me,[_e,m(e("input",{class:"form-control",type:"date",id:"from_date",name:"from_date","onUpdate:modelValue":o[0]||(o[0]=a=>t.form.from_date=a)},null,512),[[c,t.form.from_date]]),e("div",ce,n(t.form.errors.from_date),1)]),e("div",ue,[fe,m(e("input",{class:"form-control",type:"date",id:"to",name:"to","onUpdate:modelValue":o[1]||(o[1]=a=>t.form.to=a)},null,512),[[c,t.form.to]]),e("div",he,n(t.form.errors.to),1)]),_(p,{id:"leave_type",label:"Leave Type",error:t.form.errors.leave_type,options:[{id:"Casual Leave",name:"Casual Leave"},{id:"Annual Leave",name:"Annual Leave"},{id:"Short Leave",name:"Short Leave"},{id:"Study Leave",name:"Study Leave"},{id:"Medical Leave",name:"Medical Leave"}],modelValue:t.form.leave_type,"onUpdate:modelValue":o[2]||(o[2]=a=>t.form.leave_type=a)},null,8,["error","modelValue"]),_(p,{id:"type",label:"Duration",error:t.form.errors.type,options:[{id:"Half day",name:"Half day"},{id:"Full day",name:"Full day"},{id:"Start date to End date",name:"Start date to End date"}],modelValue:t.form.type,"onUpdate:modelValue":o[3]||(o[3]=a=>t.form.type=a),isDisabled:t.form.leave_type=="Short Leave"},null,8,["error","modelValue","isDisabled"]),t.form.leave_type=="Short Leave"?(i(),d("div",pe,[ve,m(e("input",{class:"form-control",type:"time",id:"start_time","onUpdate:modelValue":o[4]||(o[4]=a=>t.form.start_time=a)},null,512),[[c,t.form.start_time]])])):u("",!0),t.form.leave_type=="Short Leave"?(i(),d("div",ye,[be,m(e("input",{class:"form-control",type:"time",id:"end_time","onUpdate:modelValue":o[5]||(o[5]=a=>t.form.end_time=a)},null,512),[[c,t.form.end_time]])])):u("",!0),e("div",ge,[Se,m(e("textarea",{class:"form-control",type:"text",id:"reason",name:"reason","onUpdate:modelValue":o[6]||(o[6]=a=>t.form.reason=a)},null,512),[[c,t.form.reason]]),e("div",Le,n(t.form.errors.reason),1)]),_(p,{id:"leave_status",label:"Leave Status",error:t.form.errors.leave_status,options:[{id:"Rejected",name:"Rejected"},{id:"Approved",name:"Approved"},{id:"Pending",name:"Pending"}],modelValue:t.form.leave_status,"onUpdate:modelValue":o[7]||(o[7]=a=>t.form.leave_status=a)},null,8,["error","modelValue"]),e("div",Ve,[xe,Ce,_(C,{isRequired:!1,id:"proof_image",prvImage:f.profileImage,modelValue:t.form.proof_image,"onUpdate:modelValue":o[8]||(o[8]=a=>t.form.proof_image=a)},null,8,["prvImage","modelValue"]),e("div",ke,n(t.form.errors.proof_image),1),s.leave_data&&s.leave_data.media.length>0?(i(),d("a",{key:0,href:s.leave_data&&s.leave_data.media.length>0?s.leave_data.media[0].original_url:null,class:"",target:"_blank"},"View Proof Image",8,Ie)):u("",!0)])]),e("div",we,[e("button",{type:"submit",class:"btn btn-main me-2",disabled:t.form.processing},n(s.leave_data?"Update":"Save"),9,qe),_(r,{class:"btn btn-outline-danger",href:l.route("employee.leaves.index",t.form.employee_id),style:{"margin-right":"10px"}},{default:v(()=>[Fe]),_:1},8,["href"])])],32)])])])])]),_:1})}const Ne=V(W,[["render",Re]]);export{Ne as default};
