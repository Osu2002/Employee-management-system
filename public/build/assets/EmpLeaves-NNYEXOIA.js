import{A as f}from"./AppLayout-C2fcH5kv.js";import{J as g,o as d,e as y,w as b,f as e,j as c,N as u,K as p,i as r,E as x,C as a,q as m,F as v,s as w,O as S,P}from"./index-QC1Cz5ZB.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SideNavBar-Do_6nNue.js";const k={components:{AppLayout:f},props:{leaves:Array},data(){return{searchQuery:"",selectedStatus:"",pageSize:25,currentPage:1,form:{employee_id:"",employee_name:"",designation:"",leave_type:"",from_date:"",to_date:"",partial_days:"",duration:"",start_time:"",end_time:"",comments:"",proof:"",instructions:"",status:"Pending"}}},computed:{filteredLeaves(){return this.leaves.filter(s=>s.employee.name.toLowerCase().includes(this.searchQuery.toLowerCase())&&(this.selectedStatus===""||s.status===this.selectedStatus))},paginatedLeaves(){const s=(this.currentPage-1)*this.pageSize;return this.filteredLeaves.slice(s,s+this.pageSize)},totalPages(){return Math.ceil(this.filteredLeaves.length/this.pageSize)}},methods:{prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},openLeaveForm(s){this.form={leave_id:s.id,employee_id:s.employee.id,employee_name:s.employee.name,designation:s.employee.designation_name,leave_type:s.leave_type,from_date:s.from_date,to_date:s.to_date,partial_days:s.partial_days,duration:s.duration,start_time:s.start_time,end_time:s.end_time,comments:s.comments,proof:s.proof,status:s.status,instructions:s.instructions},new bootstrap.Modal(document.getElementById("leaveModal")).show()},deleteLeave(s){Swal.fire({title:"Are you sure?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(l=>{l.isConfirmed&&this.$inertia.delete(route("employee.leaves.destroy",s),{onSuccess:()=>{Swal.fire("Deleted!","The leave record has been deleted.","success")},onError:()=>{Swal.fire("Error!","An error occurred while deleting the leave record.","error")}})})},updateStatus(){this.$inertia.post(route("employee.leaves.update_status"),{leave_id:this.form.leave_id,status:this.form.status,instructions:this.form.instructions},{preserveState:!0,onSuccess:()=>{Swal.fire("Success","Leave status updated successfully.","success");const s=document.getElementById("leaveModal");bootstrap.Modal.getInstance(s).hide()},onError:()=>{Swal.fire("Error","An error occurred while updating the status.","error")}})}}},t=s=>(S("data-v-3f061d91"),s=s(),P(),s),C={class:"col-md-12"},z={class:"card shadow-sm"},E=t(()=>e("div",{class:"card-header"},[e("div",null,[e("h3",{class:"pb-0",style:{"font-size":"1.1rem",color:"#495057"}}," Employee Leave "),e("p",{class:"mb-0",style:{"font-size":"0.89rem"}}," Manage all employee leave applications efficiently. ")])],-1)),A={class:"card-body"},M={class:"d-flex justify-content-between mb-3"},D={class:"d-flex align-items-center"},I=t(()=>e("span",{class:"me-2",style:{"font-size":"14px"}},"Show",-1)),j=t(()=>e("option",{value:"25"},"25 rows",-1)),B=t(()=>e("option",{value:"50"},"50 rows",-1)),N=t(()=>e("option",{value:"100"},"100 rows",-1)),V=t(()=>e("option",{value:"500"},"500 rows",-1)),F=[j,B,N,V],T=t(()=>e("span",{class:"ms-2",style:{"font-size":"14px"}},"entries",-1)),U={class:"d-flex align-items-center"},R=t(()=>e("label",{for:"statusFilter",class:"me-2 text-muted fw-bold",style:{"font-size":"14px"}},"Status:",-1)),Q=t(()=>e("option",{value:""},"All Statuses",-1)),q=t(()=>e("option",{value:"Pending"},"Pending",-1)),J=t(()=>e("option",{value:"Approved"},"Approved",-1)),K=t(()=>e("option",{value:"Rejected"},"Rejected",-1)),O=[Q,q,J,K],Y={class:"d-flex align-items-center justify-content-end"},G=t(()=>e("label",{for:"search",class:"me-2",style:{"font-size":"14px"}},"Search:",-1)),H={class:"table-responsive"},W={class:"table table-bordered"},X=t(()=>e("thead",{class:"bg-light"},[e("tr",null,[e("th",null,"Employee ID"),e("th",null,"Employee Name"),e("th",null,"Designation"),e("th",null,"Leave Type"),e("th",null,"Proof"),e("th",null,"Status"),e("th",null,"Actions")])],-1)),Z=["href"],$={key:1,class:"text-muted"},ee=["onClick"],te=["onClick"],se={key:0},oe=t(()=>e("td",{colspan:"7",class:"text-center text-muted"}," No leave records found. ",-1)),ne=[oe],le=t(()=>e("br",null,null,-1)),ae={class:"d-flex justify-content-between align-items-center"},ie={class:"text-muted"},de={class:"pagination mb-0"},re={class:"modal fade",id:"leaveModal",tabindex:"-1","aria-labelledby":"leaveModalLabel","aria-hidden":"true"},ce={class:"modal-dialog modal-lg"},ue={class:"modal-content"},me=t(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"leaveModalLabel"}," Edit Leave Status "),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),pe={class:"modal-body"},_e={class:"table table-bordered"},he=t(()=>e("th",null,"Employee ID",-1)),fe=t(()=>e("th",null,"Employee Name",-1)),ge=t(()=>e("th",null,"Designation",-1)),ye=t(()=>e("th",null,"Leave Type",-1)),be=t(()=>e("th",null,"From Date",-1)),xe=t(()=>e("th",null,"To Date",-1)),ve=t(()=>e("th",null,"Partial Days",-1)),we=t(()=>e("th",null,"Duration",-1)),Se=t(()=>e("th",null,"Comments",-1)),Pe=t(()=>e("th",null,"Proof",-1)),Le=["href"],ke={key:1,class:"text-muted"},Ce={class:"d-flex flex-column gap-3 p-3",style:{"background-color":"#f8f9fa",border:"1px solid #dee2e6","border-radius":"8px"}},ze={class:"d-flex align-items-center gap-3"},Ee=t(()=>e("label",{for:"leave_status",class:"fw-bold text-secondary mb-0",style:{"font-size":"15px","min-width":"80px"}}," Status: ",-1)),Ae=t(()=>e("option",{value:"Pending"},"Pending",-1)),Me=t(()=>e("option",{value:"Approved"},"Approved",-1)),De=t(()=>e("option",{value:"Rejected"},"Rejected",-1)),Ie=[Ae,Me,De],je={class:"d-flex flex-column gap-2"},Be=t(()=>e("label",{for:"admin_instructions",class:"fw-bold text-secondary mb-0",style:{"font-size":"15px"}}," Instructions: ",-1)),Ne={class:"modal-footer d-flex justify-content-end"},Ve=t(()=>e("button",{type:"button",class:"btn btn-outline-secondary btn-sm px-3","data-bs-dismiss":"modal"}," Close ",-1));function Fe(s,l,Te,Ue,n,i){const _=g("AppLayout");return d(),y(_,null,{default:b(()=>[e("div",C,[e("div",z,[E,e("div",A,[e("div",M,[e("div",D,[I,c(e("select",{"onUpdate:modelValue":l[0]||(l[0]=o=>n.pageSize=o),class:"form-select form-select-sm",style:{width:"90px","font-size":"13px",padding:"4px 8px"}},F,512),[[u,n.pageSize]]),T]),e("div",U,[R,c(e("select",{id:"statusFilter",class:"form-select form-select-sm","onUpdate:modelValue":l[1]||(l[1]=o=>n.selectedStatus=o),style:{width:"150px","font-size":"13px"}},O,512),[[u,n.selectedStatus]])]),e("div",Y,[G,c(e("input",{id:"search",type:"text",class:"form-control form-control-sm",placeholder:"Search by Employee Name","onUpdate:modelValue":l[2]||(l[2]=o=>n.searchQuery=o),style:{width:"200px","font-size":"13px"}},null,512),[[p,n.searchQuery]])])]),e("div",H,[e("table",W,[X,e("tbody",null,[(d(!0),r(v,null,x(i.paginatedLeaves,o=>(d(),r("tr",{key:o.id},[e("td",null,"EMP500"+a(o.employee.id),1),e("td",null,a(o.employee.name),1),e("td",null,a(o.employee.designation_name||o.employee.designation),1),e("td",null,a(o.leave_type),1),e("td",null,[o.proof?(d(),r("a",{key:0,href:`/storage/${o.proof}`,target:"_blank",class:"btn btn-outline-primary btn-sm"}," View Proof ",8,Z)):(d(),r("span",$,"No Proof"))]),e("td",null,[e("span",{class:m({"badge bg-warning text-dark":o.status==="Pending","badge bg-success":o.status==="Approved","badge bg-danger":o.status==="Rejected"})},a(o.status),3)]),e("td",null,[e("button",{class:"btn btn-info btn-sm",onClick:h=>i.openLeaveForm(o)}," View/Edit ",8,ee),e("button",{class:"btn btn-danger btn-sm ms-2",onClick:h=>i.deleteLeave(o.id)}," Delete ",8,te)])]))),128)),i.paginatedLeaves.length===0?(d(),r("tr",se,ne)):w("",!0)])])]),le,e("div",ae,[e("p",ie," Showing "+a(n.currentPage)+" of "+a(i.totalPages)+" pages ",1),e("nav",null,[e("ul",de,[e("li",{class:m(["page-item",{disabled:n.currentPage===1}])},[e("button",{class:"page-link",onClick:l[3]||(l[3]=(...o)=>i.prevPage&&i.prevPage(...o))}," Previous ")],2),e("li",{class:m(["page-item",{disabled:n.currentPage===i.totalPages}])},[e("button",{class:"page-link",onClick:l[4]||(l[4]=(...o)=>i.nextPage&&i.nextPage(...o))}," Next ")],2)])])])])]),e("div",re,[e("div",ce,[e("div",ue,[me,e("div",pe,[e("table",_e,[e("tbody",null,[e("tr",null,[he,e("td",null,"EMP500"+a(n.form.employee_id),1)]),e("tr",null,[fe,e("td",null,a(n.form.employee_name),1)]),e("tr",null,[ge,e("td",null,a(n.form.designation),1)]),e("tr",null,[ye,e("td",null,a(n.form.leave_type),1)]),e("tr",null,[be,e("td",null,a(n.form.from_date),1)]),e("tr",null,[xe,e("td",null,a(n.form.to_date),1)]),e("tr",null,[ve,e("td",null,a(n.form.partial_days),1)]),e("tr",null,[we,e("td",null,a(n.form.duration),1)]),e("tr",null,[Se,e("td",null,a(n.form.comments),1)]),e("tr",null,[Pe,e("td",null,[n.form.proof?(d(),r("a",{key:0,href:`/storage/${n.form.proof}`,target:"_blank",class:"btn btn-outline-primary btn-sm"}," View Proof ",8,Le)):(d(),r("span",ke,"No Proof Uploaded"))])])])])]),e("div",Ce,[e("div",ze,[Ee,c(e("select",{id:"leave_status",class:"form-select form-select-sm","onUpdate:modelValue":l[5]||(l[5]=o=>n.form.status=o),style:{width:"200px","font-size":"14px",padding:"6px 8px","border-radius":"6px"}},Ie,512),[[u,n.form.status]])]),e("div",je,[Be,c(e("textarea",{id:"admin_instructions",class:"form-control",rows:"3",placeholder:"Enter instructions here...","onUpdate:modelValue":l[6]||(l[6]=o=>n.form.instructions=o),style:{resize:"none","font-size":"14px",padding:"8px 10px","border-radius":"6px",border:"1px solid #ced4da"}},null,512),[[p,n.form.instructions]])])]),e("div",Ne,[Ve,e("button",{type:"button",class:"btn btn-success btn-sm px-3",onClick:l[7]||(l[7]=(...o)=>i.updateStatus&&i.updateStatus(...o))}," Update Changes ")])])])])])]),_:1})}const Ke=L(k,[["render",Fe],["__scopeId","data-v-3f061d91"]]);export{Ke as default};
