import{L as _,D as k,J as x,o as c,e as v,w as y,f as e,x as g,i as a,E as d,C as p,F as u,j as w,A as C,q as A,s as S}from"./index-QC1Cz5ZB.js";import{A as O}from"./AppLayout-C2fcH5kv.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SideNavBar-Do_6nNue.js";const E={components:{Link:_,AppLayout:O},props:{errors:Object,role:Object,allPermissions:{type:Object,required:!0}},data(){return{form:k({id:null,permissions:[]})}},mounted(){this.role&&(this.form.id=this.role.id,this.checkCheckboxes())},methods:{submit(){this.form.permissions.length==0?this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"No permission selected!"):this.form.post(route("settings.roles.permissions.update"),{onSuccess:()=>{this.resetForm(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")}})},resetForm(){var o=this;Object.keys(this.$data.form).forEach(function(s,t){o.$data.form[s]=""}),Object.keys(this.$props.errors).forEach(function(s,t){o.$props.errors[s]=""})},toggleCheckboxes(o){let s=document.querySelector(`#checkbox_${o}`),t=document.querySelectorAll(`.perm_checkbox.${o}`);for(let i of t)if(i.checked=s.checked,i.checked)this.form.permissions.indexOf(i.value)===-1&&this.form.permissions.push(i.value);else{let n=this.form.permissions.indexOf(i.value);this.form.permissions.splice(n,1)}},checkCheckboxes(){let o=document.querySelectorAll(".perm_checkbox");for(let s of o)for(let t of this.role.permissions)s.value===t.name&&(s.checked=!0,this.form.permissions.indexOf(s.value)===-1&&this.form.permissions.push(s.value));console.log(this.form.permissions)}}},P={class:"row"},j={class:"col-md-12"},L={class:"card mb-4"},M=e("div",{class:"card-header pb-0"},[e("h5",null,"Permissions"),e("p",null,"Manage User Roles & Permissions.")],-1),q=e("hr",null,null,-1),F={class:"card-body"},z={id:"mytable",class:"display table table-responsive table-striped table-hover text-nowrap"},B=e("thead",null,[e("tr",null,[e("th",{class:"text-left",width:"150px"},"Name"),e("th",{width:"14%"},"Select All"),e("th",null,"Permissions")])],-1),N={class:"text-left text-capitalize"},U={class:"text-center"},D=["id","onClick"],V={class:"row"},R=["id","value"],J=["for"],W={key:0,class:"mt-4"},G=["disabled"];function H(o,s,t,i,n,m){const f=x("AppLayout");return c(),v(f,null,{default:y(()=>[e("div",P,[e("div",j,[e("div",L,[M,q,e("div",F,[e("form",{class:"form-validate",onSubmit:s[1]||(s[1]=g((...h)=>m.submit&&m.submit(...h),["prevent"]))},[e("table",z,[B,e("tbody",null,[(c(!0),a(u,null,d(t.allPermissions,(h,r)=>(c(),a("tr",{key:r},[e("td",N,p(r[0].toUpperCase()+r.slice(1).replace("-"," ")),1),e("td",U,[e("input",{class:"form-check-input perm_checkbox_all",style:{cursor:"pointer"},type:"checkbox",id:"checkbox_"+r.replaceAll(" ",""),onClick:l=>m.toggleCheckboxes(r.replaceAll(" ",""))},null,8,D)]),e("td",null,[e("div",V,[(c(!0),a(u,null,d(h,l=>(c(),a("div",{class:"col-3 my-2",key:l.id},[w(e("input",{class:A("form-check-input me-2 perm_checkbox "+r.replaceAll(" ","")),id:l.name,style:{cursor:"pointer"},type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=b=>n.form.permissions=b),value:l.name},null,10,R),[[C,n.form.permissions]]),e("label",{class:"form-check-label text-capitalize",for:l.name,style:{"font-size":"13px",cursor:"pointer"}},p(l.name.replace(r+".","")),9,J)]))),128))])])]))),128))])]),o.$root.hasPermission("roles-permissions.edit")?(c(),a("div",W,[e("button",{type:"submit",class:"btn btn-main me-2",disabled:n.form.processing}," Update ",8,G)])):S("",!0)],32)])])])])]),_:1})}const X=$(E,[["render",H]]);export{X as default};
