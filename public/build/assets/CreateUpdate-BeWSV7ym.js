import{L as x,D as w,J as _,o as d,e as g,w as f,f as s,s as c,x as u,j as l,K as i,C as t,N as S,i as m,E as C,F as P,g as b,G as v}from"./index-QC1Cz5ZB.js";import{A as V}from"./AppLayout-C2fcH5kv.js";import{F as A}from"./FileInputComponent-LsIVWHfz.js";import I from"./SuspendedUserAlert-oCI18cr0.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SideNavBar-Do_6nNue.js";const M={components:{Link:x,AppLayout:V,FileInputComponent:A,SuspendedUserAlert:I},props:{errors:Object,allRoles:Object,backendUser:Object,branches:Array,service_types:Object},data(){return{form:w({id:"",name:"",email:"",mobile_no:"",role:"",password:"",password_confirmation:"",profile_image:""}),password:w({id:"",confirm_password:"",password:"",password_confirmation:""})}},mounted(){let a=this;this.backendUser&&(this.form.id=this.backendUser.id,this.form.name=this.backendUser.name,this.form.email=this.backendUser.email,this.form.mobile_no=this.backendUser.mobile_no,this.form.role=this.backendUser.roles.length>0?this.backendUser.roles[0].id:""),$(".card-body").on("change","#role",function(e){a.form.role=$(e.target).val()}),$(".card-body").on("change","#branch",function(e){a.form.branch=$(e.target).val()})},computed:{profileImage(){return this.backendUser?this.backendUser.profile_photo_path??"":""}},methods:{submit(){this.form.post(this.backendUser?route("settings.users.update"):route("settings.users.store"),{onSuccess:()=>{this.form.reset(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.form.reset("password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")}})},changePassword(){this.password.transform(a=>({...a,id:this.form.id})).put(route("settings.users.change.password"),{preserveScroll:!0,errorBag:"changePassword",onSuccess:()=>{$("#confirmPasword").modal("hide"),this.password.reset("confirm_password","password","password_confirmation"),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.password.reset("confirm_password","password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")},onFinish:()=>{this.password.reset("confirm_password","password","password_confirmation")}})}}},L={class:"row"},E={class:"col-md-12"},B={class:"card mb-4"},N=s("div",{class:"card-header pb-0"},[s("h5",null,"Backend Users"),s("p",null,"Manage Backend Users.")],-1),R=s("hr",null,null,-1),j={class:"card-body"},D={class:"row"},O={class:"mb-3 col-md-6"},T=s("label",{for:"name",class:"form-label"},"Full Name",-1),W={class:"text-danger"},q={class:"mb-3 col-md-6"},G=s("label",{for:"email",class:"form-label"},"Email",-1),J={class:"text-danger"},K={class:"mb-3 col-md-6"},Y=s("label",{for:"mobile_no",class:"form-label"},"Mobile No",-1),z={class:"text-danger"},H={class:"mb-3 col-md-6"},Q=s("label",{for:"role",class:"form-label"},"Role",-1),X=s("option",{selected:"",value:""},"-- Select --",-1),Z=["value"],ss={class:"text-danger"},os=s("div",{class:"h5 my-4"},"Authentication",-1),es={key:0,class:"mb-3 col-md-6"},rs=s("label",{for:"password",class:"form-label"},"Password",-1),ts={class:"text-danger"},ns={key:1,class:"mb-3 col-md-6"},as=s("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1),ds={class:"text-danger"},ls={class:"mb-3 col-md-6"},is=s("label",{for:"profile_image",class:"form-label me-3"},"Profile Image",-1),ms=s("br",null,null,-1),cs={class:"text-danger"},ps={class:"mt-2"},_s=["disabled"],fs=v("Cancel"),us={key:0,class:"card"},bs=s("div",{class:"card-header pb-0"},[s("h5",null,"Update Password")],-1),hs={class:"card-body"},ws={class:"row"},gs={key:0,class:"mb-3 col-md-6"},vs=s("label",{for:"password",class:"form-label"},"Password",-1),Us={class:"text-danger"},ks={key:1,class:"mb-3 col-md-6"},ys=s("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1),xs={class:"text-danger"},Ss={class:"mt-2"},Cs=["disabled"],Ps=v("Cancel"),Vs={class:"modal modal-top fade",id:"confirmPasword",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"false"},As={class:"modal-dialog modal-sm",role:"document"},Is={class:"modal-content"},Fs=s("div",{class:"modal-header px-3 pb-2"},[s("h5",{class:"modal-title",id:"exampleModalLabel2"}," Enter Your Password ")],-1),Ms={class:"modal-body py-0 px-3"},Ls={class:"row"},Es={class:"col mb-1"},Bs={class:"text-danger"},Ns=s("div",{class:"modal-footer px-3 pb-3"},[s("button",{type:"button",class:"btn btn-sm btn-label-secondary","data-bs-dismiss":"modal"}," Close "),s("button",{type:"submit",class:"btn btn-sm btn-primary"}," Confirm ")],-1);function Rs(a,e,n,js,o,p){const U=_("SuspendedUserAlert"),k=_("FileInputComponent"),h=_("Link"),y=_("AppLayout");return d(),g(y,null,{default:f(()=>[s("div",L,[s("div",E,[s("div",B,[N,R,s("div",j,[n.backendUser&&n.backendUser.deleted_at?(d(),g(U,{key:0,userId:n.backendUser.id},null,8,["userId"])):c("",!0),s("form",{id:"formAccountSettings",onSubmit:e[7]||(e[7]=u((...r)=>p.submit&&p.submit(...r),["prevent"]))},[s("div",D,[s("div",O,[T,l(s("input",{class:"form-control",type:"text",id:"name",name:"name","onUpdate:modelValue":e[0]||(e[0]=r=>o.form.name=r)},null,512),[[i,o.form.name]]),s("div",W,t(o.form.errors.name),1)]),s("div",q,[G,l(s("input",{class:"form-control",type:"email",id:"email",name:"email","onUpdate:modelValue":e[1]||(e[1]=r=>o.form.email=r)},null,512),[[i,o.form.email]]),s("div",J,t(o.form.errors.email),1)]),s("div",K,[Y,l(s("input",{class:"form-control",type:"mobile_no",id:"mobile_no",name:"mobile_no","onUpdate:modelValue":e[2]||(e[2]=r=>o.form.mobile_no=r)},null,512),[[i,o.form.mobile_no]]),s("div",z,t(o.form.errors.mobile_no),1)]),s("div",H,[Q,l(s("select",{class:"select2 form-control form-select",id:"role","aria-label":"Default select example","onUpdate:modelValue":e[3]||(e[3]=r=>o.form.role=r)},[X,(d(!0),m(P,null,C(n.allRoles,r=>(d(),m("option",{key:r.id,value:r.id},t(r.name),9,Z))),128))],512),[[S,o.form.role]]),s("div",ss,t(o.form.errors.role),1)]),os,n.backendUser?c("",!0):(d(),m("div",es,[rs,l(s("input",{class:"form-control",type:"password",id:"password",name:"password","onUpdate:modelValue":e[4]||(e[4]=r=>o.form.password=r)},null,512),[[i,o.form.password]]),s("div",ts,t(o.form.errors.password),1)])),n.backendUser?c("",!0):(d(),m("div",ns,[as,l(s("input",{class:"form-control",type:"password",id:"confirm_password",name:"confirm_password","onUpdate:modelValue":e[5]||(e[5]=r=>o.form.password_confirmation=r)},null,512),[[i,o.form.password_confirmation]]),s("div",ds,t(o.form.errors.password),1)])),s("div",ls,[is,ms,b(k,{isRequired:!1,id:"profile_image",prvImage:p.profileImage,modelValue:o.form.profile_image,"onUpdate:modelValue":e[6]||(e[6]=r=>o.form.profile_image=r)},null,8,["prvImage","modelValue"]),s("div",cs,t(o.form.errors.profile_image),1)])]),s("div",ps,[s("button",{type:"submit",class:"btn btn-main me-2",disabled:o.form.processing},t(n.backendUser?"Update":"Save"),9,_s),b(h,{class:"btn btn-outline-danger",href:a.route("settings.users")},{default:f(()=>[fs]),_:1},8,["href"])])],32)])]),n.backendUser&&n.backendUser.deleted_at==null?(d(),m("div",us,[bs,s("div",hs,[s("form",{id:"formAccountSettings",onSubmit:e[10]||(e[10]=u((...r)=>a.updatePasssword&&a.updatePasssword(...r),["prevent"]))},[s("div",ws,[n.backendUser?(d(),m("div",gs,[vs,l(s("input",{class:"form-control",type:"password",id:"password",name:"password","onUpdate:modelValue":e[8]||(e[8]=r=>o.password.password=r)},null,512),[[i,o.password.password]]),s("div",Us,t(o.password.errors.password),1)])):c("",!0),n.backendUser?(d(),m("div",ks,[ys,l(s("input",{class:"form-control",type:"password",id:"confirm_password",name:"confirm_password","onUpdate:modelValue":e[9]||(e[9]=r=>o.password.password_confirmation=r)},null,512),[[i,o.password.password_confirmation]]),s("div",xs,t(o.password.errors.password),1)])):c("",!0)]),s("div",Ss,[s("button",{type:"submit",class:"btn btn-main me-2","data-bs-toggle":"modal","data-bs-target":"#confirmPasword",disabled:o.form.processing||!(o.password.password.length>0&&o.password.password_confirmation.length>0)}," Update ",8,Cs),b(h,{class:"btn btn-outline-danger",href:a.route("settings.users")},{default:f(()=>[Ps]),_:1},8,["href"])])],32)])])):c("",!0)]),s("div",Vs,[s("div",As,[s("div",Is,[Fs,s("form",{id:"formAccountDelete",onSubmit:e[12]||(e[12]=u((...r)=>p.changePassword&&p.changePassword(...r),["prevent"]))},[s("div",Ms,[s("div",Ls,[s("div",Es,[l(s("input",{type:"password",id:"confirmPassword",class:"form-control",placeholder:"········","onUpdate:modelValue":e[11]||(e[11]=r=>o.password.confirm_password=r)},null,512),[[i,o.password.confirm_password]]),s("div",Bs,t(o.password.errors.confirm_password),1)])])]),Ns],32)])])])])]),_:1})}const Js=F(M,[["render",Rs]]);export{Js as default};
