import{A as h}from"./AppLayout-68SlFB6E.js";import{a as y,J as b,o as _,e as D,w as L,f as e,x as S,j as r,N as c,K as d,i as f,s as p,O as w,P as A}from"./index-QC1Cz5ZB.js";import{S as u}from"./sweetalert2.all-R2NmH7ql.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SideNavBar-Do_6nNue.js";const T={components:{AppLayout:h},props:{leave:Object},data(){return{form:{leave_type:this.leave.leave_type,from_date:this.leave.from_date,to_date:this.leave.to_date,partial_days:this.leave.partial_days,duration:this.leave.duration,start_time:this.leave.start_time,end_time:this.leave.end_time,comments:this.leave.comments,proof:null}}},computed:{isMultipleDays(){return this.form.from_date&&this.form.to_date&&this.form.from_date!==this.form.to_date}},methods:{updateToDate(){this.form.to_date=this.form.from_date},handleFileChange(l){this.form.proof=l.target.files[0]},async updateLeave(){var t,m;const l=new FormData;for(const i in this.form)l.append(i,this.form[i]);try{const i=await y.post(`/employee/leaves/${this.leave.id}/update`,l);u.fire({icon:"success",title:"Leave Updated",text:"Your leave request has been updated successfully!"}),this.$inertia.visit("/employee/leaves")}catch(i){console.error(i),u.fire({icon:"error",title:"Error",text:((m=(t=i.response)==null?void 0:t.data)==null?void 0:m.message)||"An error occurred while updating the leave."})}}}},o=l=>(w("data-v-f31f9e17"),l=l(),A(),l),g={class:"container mt-5"},x={class:"row justify-content-center"},U={class:"col-md-8"},V={class:"card"},F=o(()=>e("div",{class:"card-header"},[e("h4",null,"Edit Leave Request")],-1)),k={class:"card-body"},E={class:"mb-3"},q=o(()=>e("label",{for:"leave_type",class:"form-label"},"Leave Type",-1)),M=o(()=>e("option",{value:""},"Select Leave Type",-1)),O=o(()=>e("option",{value:"Casual Leave"},"Casual Leave",-1)),B=o(()=>e("option",{value:"Sick Leave"},"Sick Leave",-1)),H=o(()=>e("option",{value:"Annual Leave"},"Annual Leave",-1)),I=[M,O,B,H],j={class:"mb-3"},N=o(()=>e("label",{for:"from_date",class:"form-label"},"From Date",-1)),P={class:"mb-3"},J=o(()=>e("label",{for:"to_date",class:"form-label"},"To Date",-1)),K={key:0,class:"mb-3"},R=o(()=>e("label",{for:"partial_days",class:"form-label"},"Partial Days",-1)),Y=o(()=>e("option",{value:"All Days"},"All Days",-1)),z=o(()=>e("option",{value:"Start Day Only"},"Start Day Only",-1)),G=o(()=>e("option",{value:"End Day Only"},"End Day Only",-1)),Q=o(()=>e("option",{value:"Start and End Day"},"Start and End Day",-1)),W=[Y,z,G,Q],X={class:"mb-3"},Z=o(()=>e("label",{for:"duration",class:"form-label"},"Duration",-1)),$=o(()=>e("option",{value:"Full Day"},"Full Day",-1)),ee=o(()=>e("option",{value:"Half Day - Morning"},"Half Day - Morning",-1)),te=o(()=>e("option",{value:"Half Day - Afternoon"},"Half Day - Afternoon",-1)),oe=[$,ee,te],se={key:1,class:"row"},ae={class:"col-md-6"},le=o(()=>e("label",{for:"start_time",class:"form-label"},"From Time",-1)),re={class:"col-md-6"},ie=o(()=>e("label",{for:"end_time",class:"form-label"},"To Time",-1)),ne={class:"mb-3"},de=o(()=>e("label",{for:"comments",class:"form-label"},"Comments",-1)),me={class:"mb-3"},_e=o(()=>e("label",{for:"proof",class:"form-label"},"Proof (Optional)",-1)),ce=o(()=>e("button",{type:"submit",class:"btn btn-success"},"Update Leave",-1));function fe(l,t,m,i,a,n){const v=b("AppLayout");return _(),D(v,null,{default:L(()=>[e("div",g,[e("div",x,[e("div",U,[e("div",V,[F,e("div",k,[e("form",{onSubmit:t[10]||(t[10]=S((...s)=>n.updateLeave&&n.updateLeave(...s),["prevent"]))},[e("div",E,[q,r(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.form.leave_type=s),id:"leave_type",class:"form-control",required:""},I,512),[[c,a.form.leave_type]])]),e("div",j,[N,r(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=s=>a.form.from_date=s),id:"from_date",class:"form-control",onChange:t[2]||(t[2]=(...s)=>n.updateToDate&&n.updateToDate(...s)),required:""},null,544),[[d,a.form.from_date]])]),e("div",P,[J,r(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=s=>a.form.to_date=s),id:"to_date",class:"form-control",required:""},null,512),[[d,a.form.to_date]])]),n.isMultipleDays?(_(),f("div",K,[R,r(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.form.partial_days=s),id:"partial_days",class:"form-control",required:""},W,512),[[c,a.form.partial_days]])])):p("",!0),e("div",X,[Z,r(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>a.form.duration=s),id:"duration",class:"form-control",required:""},oe,512),[[c,a.form.duration]])]),a.form.duration==="Specify Time"?(_(),f("div",se,[e("div",ae,[le,r(e("input",{type:"time","onUpdate:modelValue":t[6]||(t[6]=s=>a.form.start_time=s),id:"start_time",class:"form-control"},null,512),[[d,a.form.start_time]])]),e("div",re,[ie,r(e("input",{type:"time","onUpdate:modelValue":t[7]||(t[7]=s=>a.form.end_time=s),id:"end_time",class:"form-control"},null,512),[[d,a.form.end_time]])])])):p("",!0),e("div",ne,[de,r(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=s=>a.form.comments=s),id:"comments",class:"form-control",rows:"3"},null,512),[[d,a.form.comments]])]),e("div",me,[_e,e("input",{type:"file",onChange:t[9]||(t[9]=(...s)=>n.handleFileChange&&n.handleFileChange(...s)),id:"proof",class:"form-control"},null,32)]),ce],32)])])])])])]),_:1})}const be=C(T,[["render",fe],["__scopeId","data-v-f31f9e17"]]);export{be as default};
