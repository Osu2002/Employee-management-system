import{L as y,D as g,J as m,o as r,e as v,w as c,f as e,g as u,C as l,x as w,j as _,K as p,i as h,E as S,F as x,G as D}from"./index-QC1Cz5ZB.js";import{A as k}from"./AppLayout-C2fcH5kv.js";import{F as C}from"./FileInputComponent-LsIVWHfz.js";import{S as E}from"./SideNavBar-Do_6nNue.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={components:{Link:y,AppLayout:k,FileInputComponent:C,SelectInputComponent:E},props:{errors:Object,employee:Object,document:Object,document_data:Object},data(){return{form:g({doc_id:"",employee_id:this.employee.id,upload_date:"",document_name:"",file:""})}},mounted(){this.employee&&(this.form.id=this.employee.id)},computed:{document_file(){return this.employee&&this.employee.media.length>0?this.employee.media[0].original_url:""}},methods:{updateDocumentDisplayStatus(s,o){this.form.doc_id=s,this.form.employee_id=o,this.form.put(route("employee.document.update_display_status",s),{preserveScroll:!0,onSuccess:()=>{this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"Staus Updated Successfully! ")},onError:()=>{this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")}})},onFileChanged(s){const o=s.target;o&&o.files&&(this.form.file=o.files[0])},submit(){this.form.post(this.leaves?route("employee.document.update"):route("employee.document.store"),{onSuccess:()=>{this.form.reset(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.form.reset("password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")}})},deleteDocument(s,o){confirm("Are you sure you want to delete this record?")&&this.form.delete(route("employee.document.destroy",{id:s,employee_id:o}),{onSuccess:()=>{this.$root.showMessage("success",'<span class="text-success">Deleted</span><br/>',"Record was deleted successfully!"),this.document_data=this.document_data.filter(a=>a.id!==s)},onError:()=>{this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Failed to delete the record!")}})}}},L={class:"row"},M={class:"col-md-12"},U={class:"card mb-4"},V={class:"card-header pb-0"},j={class:"col-12 mb-4"},N={class:"row"},O={class:"col-1"},B=e("i",{class:"back-icon fas fa-arrow-left p-2"},null,-1),I={class:"col-11 d-flex justify-content-end"},R={class:"m-0 text-center"},T=e("h5",null,"Employee Documents",-1),G=e("p",null,"Upload your all documents here.",-1),H={class:"card-body"},J={class:"row"},K={class:"mb-3 col-md-3",action:"/action_page.php"},W=e("label",{for:"upload_date"},"Upload Date:",-1),q={class:"text-danger"},z={class:"mb-3 col-md-3",action:"/action_page.php"},P=e("label",{for:"document_name"},"Document Name:",-1),Q={class:"text-danger"},X={class:"mb-3 col-md-4",action:"/action_page.php"},Y=e("label",{for:"upload_document"},"Upload Document:",-1),Z={class:"mb-3"},$={class:"text-danger"},ee={class:"mt-2"},te=["disabled"],oe=D("Cancel"),se={class:"row"},ne={class:"card mb-4"},le=e("div",{class:"card-header pb-0"},[e("h5",null,"Employee documents")],-1),ae={class:"card-body"},de={class:"records-found"},re=e("thead",null,[e("tr",null,[e("th"),e("th",null,"Upload Date"),e("th",null,"Employee Name"),e("th",null,"Document Name"),e("th",null,"Document"),e("th",null,"Actions")])],-1),ce=e("td",null,[e("input",{type:"checkbox"})],-1),ie=["href"],me=e("div",{class:"form-check form-switch"},null,-1),ue=["onClick"],_e=["onClick"],pe=["href"];function he(s,o,a,fe,n,d){const i=m("Link"),f=m("AppLayout");return r(),v(f,null,{default:c(()=>[e("div",L,[e("div",M,[e("div",U,[e("div",V,[e("div",j,[e("div",N,[e("div",O,[u(i,{class:"back-button",href:s.route("employee.edit",n.form.employee_id)},{default:c(()=>[B]),_:1},8,["href"])]),e("div",I,[e("h5",R,l(a.employee.name),1)])])]),T,G]),e("div",H,[e("form",{id:"formAccountSettings",onSubmit:o[3]||(o[3]=w((...t)=>d.submit&&d.submit(...t),["prevent"]))},[e("div",J,[e("div",K,[W,_(e("input",{class:"form-control",type:"date",id:"upload_date",name:"upload_date","onUpdate:modelValue":o[0]||(o[0]=t=>n.form.upload_date=t)},null,512),[[p,n.form.upload_date]]),e("div",q,l(n.form.errors.upload_date),1)]),e("div",z,[P,_(e("input",{class:"form-control",type:"text",id:"document_name",name:"document_name","onUpdate:modelValue":o[1]||(o[1]=t=>n.form.document_name=t)},null,512),[[p,n.form.document_name]]),e("div",Q,l(n.form.errors.document_name),1)]),e("div",X,[Y,e("div",Z,[e("input",{class:"form-control",type:"file",onChange:o[2]||(o[2]=t=>d.onFileChanged(t)),id:"FileOne"},null,32)]),e("div",$,l(n.form.errors.upload_document),1)])]),e("div",ee,[e("button",{type:"submit",class:"btn btn-main me-2",disabled:n.form.processing}," Save ",8,te),u(i,{type:"button",href:s.route("employee.edit",n.form.employee_id),class:"btn btn-outline-danger",style:{"margin-right":"10px"}},{default:c(()=>[oe]),_:1},8,["href"])])],32)])])])]),e("div",se,[e("div",ne,[le,e("div",ae,[e("div",de,[e("table",null,[re,(r(!0),h(x,null,S(a.document_data,t=>(r(),h("tbody",{key:t.id},[e("tr",null,[ce,e("td",null,l(t.upload_date),1),e("td",null,l(a.employee.name),1),e("td",null,l(t.document_name),1),e("td",null,[e("a",{href:t.media[0].original_url,target:"_blank"},l(t.media[0].original_url),9,ie),me]),e("td",null,[e("button",{class:"btn btn-success btn-sm",onClick:b=>d.updateDocumentDisplayStatus(t.id,a.employee.id)},l(t.display_to_employee==1?"Hide":"Show"),9,ue),e("button",{class:"cancel",onClick:b=>d.deleteDocument(t.id,a.employee.id)}," Delete ",8,_e),e("a",{class:"btn btn-secondary btn-sm",href:t.media[0].original_url,target:"_blank"},"View",8,pe)])])]))),128))])])])])])]),_:1})}const Se=F(A,[["render",he]]);export{Se as default};
