import{A as y}from"./AppLayout-68SlFB6E.js";import{S as u}from"./sweetalert2.all-R2NmH7ql.js";import{D as h,J as b,o as i,e as D,w as g,f as e,x as A,j as n,N as m,i as d,E as S,C as L,F as x,K as c,s as _,O as w,P as C}from"./index-QC1Cz5ZB.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SideNavBar-Do_6nNue.js";const T={components:{AppLayout:y},data(){return{loading:!1,form:h({employee_id:this.$page.props.employee_id||"",leave_type:"",available_leaves:null,from_date:"",to_date:"",partial_days:"",duration:"",start_time:"",end_time:"",comments:"",proof:null})}},props:{user:Object,employee_id:Number},computed:{isMultipleDays(){return this.form.from_date&&this.form.to_date&&this.form.from_date!==this.form.to_date},showDurationSection(){return this.form.from_date===this.form.to_date&&this.form.from_date!==""||this.form.partial_days==="All Days"}},methods:{updateAvailableLeaves(){const r=this.user.leave_types.find(t=>t.type===this.form.leave_type);r?this.form.available_leaves=r.available_leaves:this.form.available_leaves=null},updateToDate(){this.form.to_date=this.form.from_date,this.calculateDuration()},calculateDuration(){return totalDays},handleFileChange(r){this.form.proof=r.target.files[0]},submitLeave(){this.loading=!0,this.form.post(route("leave.store"),{onSuccess:()=>{u.fire({icon:"success",title:"Success",text:"Your leave request has been submitted successfully!",confirmButtonText:"OK"})},onError:()=>{u.fire({icon:"error",title:"Error",confirmButtonText:"Try Again"})}})}}},s=r=>(w("data-v-7120b4d8"),r=r(),C(),r),E={class:"bg-container"},O={class:"container mt-5"},V={class:"row justify-content-center"},k={class:"col-md-8"},M={class:"card shadow-lg"},q=s(()=>e("div",{class:"card-header text-center"},[e("h4",{class:"mb-0"},"Apply for Leave")],-1)),B={class:"card-body"},U={class:"row mb-4"},j={class:"col-md-6"},H=s(()=>e("label",{for:"leave_type",class:"form-label"},"Leave Type",-1)),I=s(()=>e("option",{value:"",disabled:""},"Select Leave Type",-1)),N=["value"],P={class:"col-md-6"},K=s(()=>e("label",{class:"form-label"},"Available Leaves",-1)),J=["value"],Y={class:"row mb-4"},z={class:"col-md-6"},G=s(()=>e("label",{for:"from_date",class:"form-label"},"From Date",-1)),Q={class:"col-md-6"},R=s(()=>e("label",{for:"to_date",class:"form-label"},"To Date",-1)),W={class:"d-flex justify-content-between mb-4"},X={key:0,class:"col-md-5"},Z=s(()=>e("label",{for:"partial_days",class:"form-label"},"Partial Days",-1)),$=s(()=>e("option",{value:"",disabled:""},"-- Select --",-1)),ee=s(()=>e("option",{value:"All Days"},"All Days",-1)),te=s(()=>e("option",{value:"Start Day Only"},"Start Day Only",-1)),oe=s(()=>e("option",{value:"End Day Only"},"End Day Only",-1)),se=s(()=>e("option",{value:"Start and End Day"},"Start and End Day",-1)),ae=[$,ee,te,oe,se],le={key:1,class:"col-md-5"},re=s(()=>e("label",{for:"duration",class:"form-label"},"Duration",-1)),ie=s(()=>e("option",{value:"Full Day"},"Full Day",-1)),ne=s(()=>e("option",{value:"Half Day - Morning"},"Half Day - Morning",-1)),de=s(()=>e("option",{value:"Half Day - Afternoon"},"Half Day - Afternoon",-1)),me=[ie,ne,de],ce={class:"mb-4"},_e=s(()=>e("label",{for:"comments",class:"form-label"},"Comments",-1)),ue={class:"mb-4"},fe=s(()=>e("label",{for:"proof",class:"form-label"},"Proof (Optional)",-1)),pe={key:0,class:"text-center my-3"},ve=s(()=>e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"})],-1)),ye=[ve],he=["disabled"];function be(r,t,f,De,a,l){const p=b("AppLayout");return i(),D(p,null,{default:g(()=>[e("div",E,[e("div",O,[e("div",V,[e("div",k,[e("div",M,[q,e("div",B,[e("form",{onSubmit:t[10]||(t[10]=A((...o)=>l.submitLeave&&l.submitLeave(...o),["prevent"]))},[e("div",U,[e("div",j,[H,n(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>a.form.leave_type=o),id:"leave_type",class:"form-select",required:"",onChange:t[1]||(t[1]=(...o)=>l.updateAvailableLeaves&&l.updateAvailableLeaves(...o))},[I,(i(!0),d(x,null,S(f.user.leave_types,(o,v)=>(i(),d("option",{key:v,value:o.type},L(o.type),9,N))),128))],544),[[m,a.form.leave_type]])]),e("div",P,[K,e("input",{type:"text",class:"form-control",value:a.form.available_leaves,readonly:""},null,8,J)])]),e("div",Y,[e("div",z,[G,n(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=o=>a.form.from_date=o),id:"from_date",class:"form-control",onChange:t[3]||(t[3]=(...o)=>l.updateToDate&&l.updateToDate(...o)),required:""},null,544),[[c,a.form.from_date]])]),e("div",Q,[R,n(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=o=>a.form.to_date=o),id:"to_date",class:"form-control",onChange:t[5]||(t[5]=(...o)=>l.calculateDuration&&l.calculateDuration(...o)),required:""},null,544),[[c,a.form.to_date]])])]),e("div",W,[l.isMultipleDays?(i(),d("div",X,[Z,n(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>a.form.partial_days=o),id:"partial_days",class:"form-select",required:""},ae,512),[[m,a.form.partial_days]])])):_("",!0),l.showDurationSection?(i(),d("div",le,[re,n(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>a.form.duration=o),id:"duration",class:"form-select",required:""},me,512),[[m,a.form.duration]])])):_("",!0)]),e("div",ce,[_e,n(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=o=>a.form.comments=o),id:"comments",class:"form-control",rows:"3",placeholder:"Add your comments here..."},null,512),[[c,a.form.comments]])]),e("div",ue,[fe,e("input",{type:"file",onChange:t[9]||(t[9]=(...o)=>l.handleFileChange&&l.handleFileChange(...o)),id:"proof",class:"form-control"},null,32)]),a.loading?(i(),d("div",pe,ye)):_("",!0),e("button",{type:"submit",class:"btn gradient-btn btn-rounded",disabled:a.loading}," Apply ",8,he)],32)])])])])])])]),_:1})}const we=F(T,[["render",be],["__scopeId","data-v-7120b4d8"]]);export{we as default};
